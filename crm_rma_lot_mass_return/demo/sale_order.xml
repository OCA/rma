<?xml version="1.0"?>
<openerp>
    <data noupdate="1">

        <record id="so_wizard_rma_1" model="sale.order">
            <field name="name">SOWIZARDCLAIM001</field>
            <field name="date_order">2015-05-08 18:17:05</field>
            <field name="partner_id" ref="base.res_partner_12"/>
            <field name="currency_id" ref="base.EUR"/>
            <field name="pricelist_id" ref="product.list0"/>
        </record>

        <record id="so_wizard_rma_1_line_1" model="sale.order.line">
            <field name="name">SOWIZARDCLAIM001 Line 1</field>
            <field name="order_id" ref="so_wizard_rma_1"/>
            <field name="product_id" ref="product.product_product_38"/>
            <field name="product_uom_qty">1</field>
            <field name="price_unit">65.0</field>
        </record>

        <record id="so_wizard_rma_1_line_2" model="sale.order.line">
            <field name="name">SOWIZARDCLAIM001 Line 2</field>
            <field name="order_id" ref="so_wizard_rma_1"/>
            <field name="product_id" ref="product.product_product_39"/>
            <field name="product_uom_qty">2</field>
            <field name="price_unit">66.0</field>
        </record>

        <record id="so_wizard_rma_1_line_3" model="sale.order.line">
            <field name="name">SOWIZARDCLAIM001 Line 3</field>
            <field name="order_id" ref="so_wizard_rma_1"/>
            <field name="product_id" ref="product.product_product_6"/>
            <field name="product_uom_qty">1</field>
            <field name="price_unit">800.0</field>
        </record>

        <record id="so_wizard_rma_1_line_4" model="sale.order.line">
            <field name="name">SOWIZARDCLAIM001 Line 4</field>
            <field name="order_id" ref="so_wizard_rma_1"/>
            <field name="product_id" ref="product.product_product_8"/>
            <field name="product_uom_qty">2</field>
            <field name="price_unit">1299.0</field>
        </record>

        <record id="so_wizard_rma_1_line_5" model="sale.order.line">
            <field name="name">SOWIZARDCLAIM001 Line 5</field>
            <field name="order_id" ref="so_wizard_rma_1"/>
            <field name="product_id" ref="product.product_product_8"/>
            <field name="product_uom_qty">3</field>
            <field name="price_unit">1299.0</field>
        </record>

        <workflow action="order_confirm" model="sale.order" ref="so_wizard_rma_1"/>

        <!-- Transfer of Products in the Picking of Purchase Order 2 -->

        <record id="transfer_sale_wizard_rma" model="stock.transfer_details">
            <field name="picking_id" model="stock.picking" search="[('origin', '=', 'SOWIZARDCLAIM001')]"/>
            <field name="picking_source_location_id" ref="stock.stock_location_stock"/>
            <field name="picking_destination_location_id" ref="stock.stock_location_customers"/>
        </record>

        <!-- Transfer Detail Items Part 2 of Product Transfer -->

        <record id="transfer_sale_wizard_rma_item_1" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_38"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">1</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
        </record>

        <record id="transfer_sale_wizard_rma_item_2" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_39"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">2</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
        </record>

        <record id="transfer_sale_wizard_rma_item_3" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_6"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">1</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
            <field name="lot_id" ref="lot_purchase_wizard_rma_item_5"/>
        </record>

        <record id="transfer_sale_wizard_rma_item_4" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_8"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">1</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
            <field name="lot_id" ref="lot_purchase_wizard_rma_item_1"/>
        </record>

        <record id="transfer_sale_wizard_rma_item_5" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_8"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">1</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
            <field name="lot_id" ref="lot_purchase_wizard_rma_item_2"/>
        </record>

        <record id="transfer_sale_wizard_rma_item_6" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_8"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">1</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
            <field name="lot_id" ref="lot_purchase_wizard_rma_item_3"/>
        </record>

        <record id="transfer_sale_wizard_rma_item_7" model="stock.transfer_details_items">
            <field name="transfer_id" ref="transfer_sale_wizard_rma"/>
            <field name="product_id" ref="product.product_product_8"/>
            <field name="product_uom_id" ref="product.product_uom_unit"/>
            <field name="quantity">1</field>
            <field name="sourceloc_id"  ref="stock.stock_location_stock"/>
            <field name="destinationloc_id" ref="stock.stock_location_customers"/>
            <field name="lot_id" ref="lot_purchase_wizard_rma_item_4"/>
        </record>

        <!-- Make transfer of product -->

        <function model="stock.transfer_details"
            name="do_detailed_transfer" eval="[ref('transfer_sale_wizard_rma')]"/>

        <workflow action="manual_invoice" model="sale.order" ref="so_wizard_rma_1" uid="base.user_root"/>

        <workflow action="invoice_open" model="account.invoice">
            <value eval="obj(ref('so_wizard_rma_1')).invoice_ids[0].id" model="sale.order"/>
        </workflow>

        <function model="account.invoice" name="pay_and_reconcile">
            <!-- ids = -->  <value eval="obj(ref('so_wizard_rma_1')).invoice_ids[0].id" model="sale.order"/>
            <!-- amount = -->            <value eval="30000"/>
            <!-- account_id = -->        <value eval="ref('account.cash')"/>
            <!-- period_id = -->            <value eval="ref('account.period_10')"/>
            <!-- journal_id = -->        <value eval="ref('account.bank_journal')"/>
            <!-- writeoff_acc_id = -->        <value eval="ref('account.cash')"/>
            <!-- writeoff_period_id = -->    <value eval="ref('account.period_10')"/>
            <!-- writeoff_journal_id = -->    <value eval="ref('account.bank_journal')"/>
            <!-- context = -->              <value eval="{}"/>
            <!-- name = -->                 <value eval="str('Payment Maria RMA')"/>
        </function>

    </data>
</openerp>
